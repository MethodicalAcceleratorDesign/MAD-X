%%\title{Range Selection}
%  Changed by: Chris ISELIN, 27-Jan-1997 
%  Changed by: Hans Grote, 10-Jun-2002 

\chapter{Range and Class Selection Format}

\section{RANGE}
\label{sec:range}

A range can be defined starting at  a given element and ending at
another element, both elements included. Two forms exist:  

\madxmp{
RANGE=position; \\
RANGE=position1/position2;
} 

In the first case, only one element is selected; in the second case, one
or several elements are selected. NOTE: position1 must not be behind
position2 in the sequence.  

"position" is composed of the element name and an optional occurrence 
count in the sequence: \label{range_position}
\madxmp{
xxxxxxxxxxxxxx\= \kill
mq.ir5.l6..1  \> ! no occurrence count given\\
mb[17]        \> ! occurrence count given
}

There are two predefined indices in \madx: 
\begin{madlist}
   \ttitem{\#S} The start of the beam line expanded by USE, 
   \ttitem{\#E} The end of the beam line expanded by USE. 
\end{madlist} 

If a range is selected in a \texttt{USE} statement: 
\madxmp{
USE, PERIOD=lhcb1, RANGE=ir1/ir5;
} 
then the  \texttt{\#S} and \texttt{\#E} indices refer to the start and
end of the  range expanded by the \texttt{USE} statement. 

 Examples for ranges: 
\madxmp{
xxxxxxxxxxxxxxxxxxxxxxxx\= \kill
.., RANGE=\#S;          \>! first element \\
.., RANGE=\#S/\#E;      \>! full expansion range \\
.., RANGE=mb[5]/\#E;    \>! from mb 5 to end \\
.., RANGE=mq.ir5.l6..1; \>! first occurrence of element mq.ir5.l6..1
}

\section{CLASS}
\label{sec:class} 
The single name of a class (no occurrence counts). A class is the name
of an element (or basic type) from which other elements have been
derived. 

Example: 
\madxmp{
MQ: quadrupole;   \= ! makes the element MQ \\
Q1: MQ;           \> ! makes the element Q1 from class MQ \\
Q2: MQ;           \> ! makes the element Q2 from class MQ \\
Q1..A: Q1;        \> ! makes an element from class Q1 \\
Q2..B: Q2;        \> ! makes an element from class Q2 
}

Subsequent selection with criterion \texttt{CLASS="MQ"} will actually select 
\texttt{Q1, Q2, Q1..A}, and \texttt{Q2..B} in this example. 

%\href{http://www.cern.ch/Hans.Grote/hansg_sign.html}{hansg}, June 17, 2002 

